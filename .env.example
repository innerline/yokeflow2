# YokeFlow - Environment Configuration
# Copy this file to .env and update with your values

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL Connection String
#
# For local Docker development (standard setup):
#   - Start YokeFlow containers: docker-compose up -d
#   - Creates database in yokeflow_postgres_data volume
DATABASE_URL=postgresql://agent:agent_dev_password@localhost:5432/yokeflow

# For migration from old autonomous_coding database:
#   - See DOCKER_MIGRATION.md for complete migration guide
#   - Backup old data: docker exec autonomous_coding_postgres pg_dump -U agent autonomous_coding > backup.sql
#   - Restore to new: docker exec -i yokeflow_postgres psql -U agent yokeflow < backup.sql

# PostgreSQL Password (for managed database services like Digital Ocean)
# This should match the password in your DATABASE_URL
POSTGRES_PASSWORD=agent_dev_password

# For production (Digital Ocean Managed Database example):
# DATABASE_URL=postgresql://user:password@db-host.ondigitalocean.com:25060/defaultdb?sslmode=require
# POSTGRES_PASSWORD=your_production_db_password

# =============================================================================
# CLAUDE API CONFIGURATION
# =============================================================================

# Claude API Token (get from claude.ai/code)
CLAUDE_CODE_OAUTH_TOKEN=your_token_here
CLAUDE_API_KEY=your_api_key_here

# Default models (DEPRECATED - moved to .yokeflow.yaml)
# These are kept for backward compatibility but will be ignored if .yokeflow.yaml exists
# Configure models in .yokeflow.yaml under the "models:" section instead
DEFAULT_INITIALIZER_MODEL=claude-opus-4-5-20251101
DEFAULT_CODING_MODEL=claude-sonnet-4-5-20250929
DEFAULT_REVIEW_MODEL=claude-sonnet-4-5-20250929
DEFAULT_PROMPT_IMPROVEMENT_MODEL=claude-opus-4-5-20251101

# =============================================================================
# LLM PROVIDER CONFIGURATION
# =============================================================================

# Default LLM provider (claude, lmstudio, llamacpp)
# Claude is PRIMARY for all operations
LLM_PROVIDER=claude

# LMStudio Configuration (MANDATORY for Personal Obsidian Vault)
# Download: https://lmstudio.ai/
# Start server: Open LMStudio -> Local Server -> Start
LMSTUDIO_API_BASE=http://localhost:1234/v1
LMSTUDIO_MODEL=local-model

# llama.cpp Configuration (Future support)
# Start server: ./server --host 0.0.0.0 --port 8080
LLAMACPP_API_BASE=http://localhost:8080/v1

# =============================================================================
# VAULT CONFIGURATION (Knowledge Integration)
# =============================================================================

# Personal Obsidian Vault - MUST use LMStudio for privacy (no data leaves local)
# All queries to this vault are routed to LMStudio automatically
PERSONAL_VAULT_PATH=/path/to/your/personal/obsidian/vault

# Agents (Local) Vault - Uses Claude with agent models
# Can use Claude's full capabilities
AGENTS_VAULT_PATH=/path/to/your/agents/vault

# =============================================================================
# AI INFRASTRUCTURE (Optional - from local-ai-packaged integration)
# =============================================================================

# Qdrant Vector Database (for RAG)
# QDRANT_URL=http://localhost:6333

# Neo4j Knowledge Graph
# NEO4J_URI=bolt://localhost:7687
# NEO4J_USER=neo4j
# NEO4J_PASSWORD=your_password

# n8n Workflow Automation
# N8N_URL=http://localhost:5678
# N8N_ENCRYPTION_KEY=your_key
# N8N_JWT_SECRET=your_secret

# Flowise Visual Agent Builder
# FLOWISE_URL=http://localhost:3001
# FLOWISE_USERNAME=admin
# FLOWISE_PASSWORD=your_password

# SearXNG Private Search
# SEARXNG_URL=http://localhost:8080

# Langfuse Observability
# LANGFUSE_PUBLIC_KEY=pk-...
# LANGFUSE_SECRET_KEY=sk-...

# =============================================================================
# REMOTE CONTROL (Telegram, Slack, GitHub)
# =============================================================================

# Telegram Bot Configuration
# Get token from @BotFather on Telegram
# 1. Message @BotFather on Telegram
# 2. Send /newbot and follow instructions
# 3. Copy the token here
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here

# Telegram polling timeout in seconds (default: 30)
TELEGRAM_POLLING_TIMEOUT=30

# Slack Configuration (Future)
# SLACK_BOT_TOKEN=xoxb-...
# SLACK_APP_TOKEN=xapp-...

# GitHub Configuration (Future)
# GITHUB_TOKEN=ghp_...
# GITHUB_WEBHOOK_SECRET=your_webhook_secret

# =============================================================================
# AUTHENTICATION & SECURITY (REQUIRED IN PRODUCTION)
# =============================================================================

# JWT Secret Key - Generate a secure random string for production
# Generate with: openssl rand -hex 32
SECRET_KEY=your-secret-key-change-in-production

# UI Password - Single password for authentication
# Leave empty for development mode (auth disabled)
UI_PASSWORD=

# Access token expiration time in minutes (default: 1440 = 24 hours)
ACCESS_TOKEN_EXPIRE_MINUTES=1440

# =============================================================================
# API SERVER CONFIGURATION
# =============================================================================

# API Server Settings
API_HOST=0.0.0.0
API_PORT=8000
API_RELOAD=true  # Set to false in production

# CORS Origins (comma-separated)
CORS_ORIGINS=http://localhost:3000

# =============================================================================
# WEB UI CONFIGURATION
# =============================================================================

# Next.js Web UI Settings
# For local development:
NEXT_PUBLIC_API_URL=http://localhost:8000
NEXT_PUBLIC_WS_URL=ws://localhost:8000

# For production with HTTPS:
# NEXT_PUBLIC_API_URL=https://your-domain.com
# NEXT_PUBLIC_WS_URL=wss://your-domain.com

WEB_UI_PORT=3000
# =============================================================================
# MONITORING & LOGGING
# =============================================================================

# Log Level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
# Controls verbosity of API server logs. Defaults to ERROR if not set.
# Use DEBUG for detailed troubleshooting, INFO for normal operations
LOG_LEVEL=ERROR

# Log Directory
LOG_DIR=./logs

# Session timeout in seconds (default: 3600 = 1 hour)
SESSION_TIMEOUT=3600

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Auto-continue between sessions (seconds delay)
AUTO_CONTINUE_ENABLED=true
AUTO_CONTINUE_DELAY=3

# =============================================================================
# DEVELOPMENT SETTINGS
# =============================================================================

# Environment (development, staging, production)
ENVIRONMENT=development

# Debug mode
DEBUG=false

# Verbose output
VERBOSE=false