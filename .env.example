# YokeFlow - Environment Configuration
# Copy this file to .env and update with your values

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL Connection String
#
# For local Docker development (standard setup):
#   - Start YokeFlow containers: docker-compose up -d
#   - Creates database in yokeflow_postgres_data volume
DATABASE_URL=postgresql://agent:agent_dev_password@localhost:5432/yokeflow

# For migration from old autonomous_coding database:
#   - See DOCKER_MIGRATION.md for complete migration guide
#   - Backup old data: docker exec autonomous_coding_postgres pg_dump -U agent autonomous_coding > backup.sql
#   - Restore to new: docker exec -i yokeflow_postgres psql -U agent yokeflow < backup.sql

# PostgreSQL Password (for managed database services like Digital Ocean)
# This should match the password in your DATABASE_URL
POSTGRES_PASSWORD=

# For production (Digital Ocean Managed Database example):
# DATABASE_URL=postgresql://user:password@db-host.ondigitalocean.com:25060/defaultdb?sslmode=require
# POSTGRES_PASSWORD=your_production_db_password

# =============================================================================
# CLAUDE API CONFIGURATION
# =============================================================================

# Claude API Token (get from claude.ai/code)
CLAUDE_CODE_OAUTH_TOKEN=your_token_here

# Default models (can be overridden per project)
DEFAULT_INITIALIZER_MODEL=claude-opus-4-5-20251101
DEFAULT_CODING_MODEL=claude-sonnet-4-5-20250929
DEFAULT_REVIEW_MODEL=claude-sonnet-4-5-20250929

# Prompt Improvement Model (used for generating improved prompts from review patterns)
# Recommended: Use Opus for better reasoning and comprehensive improvements
# This is a critical task that benefits from the most capable model
DEFAULT_PROMPT_IMPROVEMENT_MODEL=claude-opus-4-5-20251101

# =============================================================================
# AUTHENTICATION & SECURITY (REQUIRED IN PRODUCTION)
# =============================================================================

# JWT Secret Key - Generate a secure random string for production
# Generate with: openssl rand -hex 32
SECRET_KEY=your-secret-key-change-in-production

# UI Password - Single password for authentication
# Leave empty for development mode (auth disabled)
UI_PASSWORD=

# Access token expiration time in minutes (default: 1440 = 24 hours)
ACCESS_TOKEN_EXPIRE_MINUTES=1440

# =============================================================================
# API SERVER CONFIGURATION
# =============================================================================

# API Server Settings
API_HOST=0.0.0.0
API_PORT=8000
API_RELOAD=true  # Set to false in production

# CORS Origins (comma-separated)
CORS_ORIGINS=http://localhost:3000,http://localhost:5173

# =============================================================================
# WEB UI CONFIGURATION
# =============================================================================

# Next.js Web UI Settings
# For local development:
NEXT_PUBLIC_API_URL=http://localhost:8000
NEXT_PUBLIC_WS_URL=ws://localhost:8000

# For production with HTTPS:
# NEXT_PUBLIC_API_URL=https://your-domain.com
# NEXT_PUBLIC_WS_URL=wss://your-domain.com

WEB_UI_PORT=3000

# =============================================================================
# GITHUB INTEGRATION (Optional)
# =============================================================================

# GitHub Personal Access Token (for repo creation, PR management)
# GITHUB_TOKEN=ghp_your_token_here

# Default GitHub organization/user
# GITHUB_DEFAULT_OWNER=your-username

# =============================================================================
# DEPLOYMENT CONFIGURATION (Optional)
# =============================================================================

# E2B Sandbox API Key (for sandboxed execution)
# E2B_API_KEY=your_e2b_key_here

# Digital Ocean API Token (for infrastructure management)
# DO_API_TOKEN=your_do_token_here

# =============================================================================
# MONITORING & LOGGING
# =============================================================================

# Log Level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
# Controls verbosity of API server logs. Defaults to ERROR if not set.
# Use DEBUG for detailed troubleshooting, INFO for normal operations
LOG_LEVEL=ERROR

# Log Directory
LOG_DIR=./logs

# Session timeout in seconds (default: 3600 = 1 hour)
SESSION_TIMEOUT=3600

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Enable automatic review after N sessions
AUTO_REVIEW_ENABLED=false
AUTO_REVIEW_FREQUENCY=5

# Enable browser automation for testing
BROWSER_AUTOMATION_ENABLED=true

# Auto-continue between sessions (seconds delay)
AUTO_CONTINUE_ENABLED=true
AUTO_CONTINUE_DELAY=3

# =============================================================================
# DEVELOPMENT SETTINGS
# =============================================================================

# Environment (development, staging, production)
ENVIRONMENT=development

# Debug mode
DEBUG=false

# Maximum iterations per session (null for unlimited)
MAX_ITERATIONS=

# Verbose output
VERBOSE=false